# Node-JS-TS
This project is based on a udemy course.
The udemy course projects are all written in plain js.
I'm rewriting them using typescript 

This is the udemy coure: 

![image](https://user-images.githubusercontent.com/75813215/223437353-60a0d126-3d5b-40b2-bf7f-66a247ee0ed4.png)

Check out the course: 
[NodeJS](https://www.udemy.com/course/nodejs-tutorial-and-projects-course/)

- Task Manager (completed ‚úîÔ∏è)
  - added mocha tests for the controllers
  - use typescript
  - used node-json-db instead of MongoDB
  
  ---
 
 - store-API (completed ‚úîÔ∏è)
   - using zod for runtime schema validation
   - mocha sinon and chai for testing
   - node-json-db as a dummy db
   
   ---
   
- JWT Basics (completed  ‚úîÔ∏è)
   - using zod for runtime schema validation
   - mocha sinon and chai for testing and super test for integration testing
   - added a integration test for the /user/dashboard route
   - node-json-db as a dummy db
   - launch.json config for debugging
  
  ---
 
 - Jobs-API (completed ‚úîÔ∏è)
   - testing with sinon chai mocha supertest
   - using zod for runtime validation instead of mongoose schema validation
   - no mongodb, using a local json-db database
   - adding swagger documentation ( todo )
   - added testing rsa keys
   - added integration tests for login signup and api/jobs/all endpoints post api/jobs, patch api/jobs, get api/jobs/:id, delete api/jobs/:id 
   
   ---
  
  - Send email (completed ‚úîÔ∏è)
    - used ethereal for configuring and recieving emails
    - used nodemailer 
   
   ![image](https://user-images.githubusercontent.com/75813215/226386322-658513d5-cab5-4628-8146-a62b1bdf900e.png)
   
  ##### Sending an email with a gmail account:
   
   ```js
   
  const transporter = nodemailer.createTransport({
    host: 'smtp.gmail.com',
    port: 465,
    secure: true,
    auth: {
        user: process.env.VERIFIED_SENDER,
        pass: process.env.SECRET_EMAIL_PASSWROD
    }
});

```

    - VERIFIED_SENDER : is the gmail email example matteo@gmail.com
    - SECRET_EMAIL_PASSWORD is the 16 digit password generated by gmail :
 go to gmail settings -> look for app password -> and add to others a password for nodemailer:
 
 ![image](https://user-images.githubusercontent.com/75813215/226399688-d6c7071d-32cb-4137-a07b-857f467389fc.png)
 
 ---

 - swagger-docs (bonus ‚≠ê - working üî®)
   - started experimenting on the openapi to create docs for my endpoint
   
   
 ---
   

- Authentication (completed ‚úîÔ∏è)
    - started using mongodb as a database
    - added only two - will add others soon
    - you have to sign in with a valid email and verify the email using a verification token (to be able to sign in);
    - logging in without verifying the email will result in a 401 error
    - added reset password functionality:
       - I added a basic submit form that sends a post request to /auth/reset-password with the token, the email and the password. 
       - the token has a ttl of 10 minutes - 
       if the password is correctly updated i recieve a 200 with this kind of body:
       
       ```json
       {
        "error":false,
         "data":{"acknowledged":true,
                 "modifiedCount":1,
                 "upsertedId":null,
                 "upsertedCount":0,
                 "matchedCount":1
                }
       } 
       ```
       
    This is the basic submit form:

    ![image](https://user-images.githubusercontent.com/75813215/228760346-d165df65-f614-4922-b632-921b8ef88f91.png)

    
    
    
  

 

 ---
 
 ---
 
 ---
 
 ---
 
 ---

creating public and private keys:

openssl genrsa -out private.pem 2048
openssl rsa -in private.pem -pubout -out public.pem


 In MongoDB, a schema defines the structure of a document, while a model provides an interface for interacting with the database.

A schema is a blueprint for the structure of a document. It defines the fields, their data types, and any validation rules for the document. A schema can be defined using the Mongoose library in Node.js. The schema provides a way to validate and enforce the structure of the data being inserted or retrieved from the database.

A model, on the other hand, is a higher-level abstraction that provides an interface for interacting with the database. It is a representation of a collection in MongoDB and is responsible for creating, updating, deleting, and querying documents in the database. A model is created using the schema and provides methods for performing operations on the database.

In summary, a schema defines the structure and validation rules of a document, while a model provides an interface for performing CRUD operations on a collection in MongoDB. The schema is used to create the model, and the model is used to interact with the database.



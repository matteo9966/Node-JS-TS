# Node-JS-TS
This project is based on a udemy course.
The udemy course projects are all written in plain js.
I'm rewriting them using typescript 

This is the udemy coure: 

![image](https://user-images.githubusercontent.com/75813215/223437353-60a0d126-3d5b-40b2-bf7f-66a247ee0ed4.png)

Check out the course: 
[NodeJS](https://www.udemy.com/course/nodejs-tutorial-and-projects-course/)

- Task Manager (completed ✔️)
  - added mocha tests for the controllers
  - use typescript
  - used node-json-db instead of MongoDB
 
 - store-API (completed ✔️)
   - using zod for runtime schema validation
   - mocha sinon and chai for testing
   - node-json-db as a dummy db
   
- JWT Basics (completed  ✔️)
   - using zod for runtime schema validation
   - mocha sinon and chai for testing and super test for integration testing
   - added a integration test for the /user/dashboard route
   - node-json-db as a dummy db
   - launch.json config for debugging
 
 - Jobs-API (completed ✔️)
   - testing with sinon chai mocha supertest
   - using zod for runtime validation instead of mongoose schema validation
   - no mongodb, using a local json-db database
   - adding swagger documentation ( todo )
   - added testing rsa keys
   - added integration tests for login signup and api/jobs/all endpoints post api/jobs, patch api/jobs, get api/jobs/:id, delete api/jobs/:id 
  
  - Send email (completed ✔️)
    - used ethereal for configuring and recieving emails
    - used nodemailer 
   
   ![image](https://user-images.githubusercontent.com/75813215/226386322-658513d5-cab5-4628-8146-a62b1bdf900e.png)
   
  ##### Sending an email with a gmail account:
   
   ```js
   
  const transporter = nodemailer.createTransport({
    host: 'smtp.gmail.com',
    port: 465,
    secure: true,
    auth: {
        user: process.env.VERIFIED_SENDER,
        pass: process.env.SECRET_EMAIL_PASSWROD
    }
});

```

    - VERIFIED_SENDER : is the gmail email example matteo@gmail.com
    - SECRET_EMAIL_PASSWORD is the 16 digit password generated by gmail :
 go to gmail settings -> look for app password -> and add to others a password for nodemailer:
 
 ![image](https://user-images.githubusercontent.com/75813215/226399688-d6c7071d-32cb-4137-a07b-857f467389fc.png)



- Authentication (working: uses mongodb)
    - started using mongodb as a database

```js
//configuring the database:
/// validation
//users validator

db.runCommand({collMod:'users',
    validator:{
        $jsonSchema:{
            bsonType:'object',
            title:"users schema validation",
            required:["name","email","password"],
            description:'name, email and password are required',
            properties:{
               name:{
                 bsonType:"string",
                 description:"must be of type string and is required",
                 minLength:3,
                 maxLength:50
               },
               email:{
                bsonType:"string",
                description:"must be of type string and is required",
                pattern:'^([a-zA-Z0-9._%+-]+)@([a-zA-Z0-9.-]+)\.([a-zA-Z]{2,})$'
               
               },
               password:{
                bsonType:"string",
                description:"must be of type string and is required"
               },
               role:{
                enum:['admin','manager','user'],
                description:'Valid roles are admin manager or user '
               },
               verificationToken:{
                bsonType:'string',
               },
               isVerified:{
                bsonType:'bool',
                //cant add a default value
               },
               passwordTokenExpirationDate:{
                bsonType:'date'
               }

            }
        }
    }
})

```

 

